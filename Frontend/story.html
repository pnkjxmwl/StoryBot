<!DOCTYPE html>
<html>
<head>
  <title>User Stories</title>
</head>
<body>
  <h1> <span id="username"></span> Stories</h1>
  <div id="userStoriesContainer"></div>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>    
  function getQueryParams() {
      const urlParams = new URLSearchParams(window.location.search);
      const params = {};
      for (const [key, value] of urlParams) {
        params[key] = value;
      }
      return params;
    }
     const queryParams = getQueryParams();
      const storyId = queryParams.storyId;

      if (!storyId) {
        // Redirect back to the main page if the storyId is not provided
        window.location.href = 'file:///D:/PROGRAM/Projects/StoryBot/Frontend/userstories.html';
      }
    
     axios.get('http://127.0.0.1:4000/api/v1/story', {
        params: {
            id: storyId
  }})
                .then((response) => {
                  console.log(response)
        
               const ele= document.getElementById('username')    
               ele.innerText=response.data.data.userId.name;
               const userStoriesContainer = document.getElementById('userStoriesContainer');

            
                const storyDiv = document.createElement('div');
                const h2Tag = document.createElement('h2');
                const storytitle= response.data.data.title
                h2Tag.textContent = storytitle;
                storyDiv.appendChild(h2Tag);

                const stories=response.data.data.content;
                const images=response.data.data.images;
                stories.forEach((part,index)=>{
                    const pTag = document.createElement('p');
                    pTag.textContent = part;
                    const imgTag = document.createElement('img');
                    imgTag.setAttribute('src', images[index]);
                    imgTag.setAttribute('alt', 'Story Image');
                    storyDiv.appendChild(pTag);
                    storyDiv.appendChild(imgTag);
                });
                userStoriesContainer.appendChild(storyDiv);
            

                }, (error) => {
                console.log(error);
                })
  </script>
</body>
</html>
